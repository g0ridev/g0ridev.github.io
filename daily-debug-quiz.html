<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Debug Quiz - g0ridev</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
            background: #ffffff;
            color: #1a1a1a;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        header {
            text-align: center;
            margin-bottom: 50px;
            padding: 40px 20px;
            border-bottom: 2px solid #e0e0e0;
        }

        h1 {
            font-size: 2.5em;
            font-weight: 600;
            margin-bottom: 10px;
            color: #000000;
            letter-spacing: -0.5px;
        }

        .subtitle {
            font-size: 1.1em;
            color: #666666;
            font-weight: 400;
        }

        .quiz-card {
            background: #fafafa;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            padding: 40px;
            margin-bottom: 30px;
        }

        .day-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e0e0e0;
        }

        .day-number {
            background: #000000;
            color: white;
            padding: 6px 14px;
            border-radius: 2px;
            font-weight: 500;
            font-size: 0.9em;
        }

        .date-info {
            color: #666666;
            font-size: 0.9em;
        }

        .question-title {
            color: #000000;
            font-size: 1.4em;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .question-desc {
            color: #1a1a1a;
            margin-bottom: 25px;
            font-size: 1.05em;
            line-height: 1.7;
        }

        .files-section {
            background: #f5f5f5;
            border: 1px solid #d0d0d0;
            border-radius: 2px;
            padding: 25px;
            margin: 25px 0;
        }

        .files-title {
            color: #000000;
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            font-size: 0.95em;
        }

        .file-link {
            display: inline-block;
            background: #000000;
            color: white;
            padding: 8px 16px;
            margin: 5px 10px 5px 0;
            text-decoration: none;
            border-radius: 2px;
            font-size: 0.9em;
            transition: all 0.2s ease;
            font-weight: 500;
        }

        .file-link:hover {
            background: #333333;
        }

        .answer-section {
            background: #ffffff;
            border: 1px solid #d0d0d0;
            border-radius: 2px;
            padding: 25px;
            margin-top: 25px;
        }

        .answer-label {
            color: #1a1a1a;
            font-weight: 500;
            margin-bottom: 12px;
            font-size: 0.95em;
        }

        .answer-input {
            width: 100%;
            padding: 12px;
            background: #ffffff;
            border: 1px solid #d0d0d0;
            border-radius: 2px;
            color: #1a1a1a;
            font-family: inherit;
            font-size: 1em;
            margin-bottom: 15px;
            transition: border-color 0.2s ease;
        }

        .answer-input:focus {
            outline: none;
            border-color: #000000;
        }

        .submit-btn {
            background: #000000;
            color: white;
            border: none;
            padding: 12px 28px;
            border-radius: 2px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .submit-btn:hover {
            background: #333333;
        }

        .result {
            margin-top: 15px;
            padding: 12px;
            border-radius: 2px;
            font-weight: 500;
            border: 1px solid;
        }

        .result.correct {
            background: #f0f9f4;
            color: #0f5132;
            border-color: #0f5132;
        }

        .result.incorrect {
            background: #ffe6e6;
            color: #842029;
            border-color: #842029;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 30px;
        }

        .stat-card {
            background: #fafafa;
            border: 1px solid #e0e0e0;
            border-radius: 2px;
            padding: 20px;
            text-align: center;
        }

        .stat-number {
            font-size: 1.8em;
            font-weight: 600;
            color: #000000;
        }

        .stat-label {
            font-size: 0.85em;
            color: #666666;
            margin-top: 5px;
            font-weight: 400;
        }

        .next-challenge {
            text-align: center;
            margin-top: 30px;
            padding: 30px;
            background: #fafafa;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
        }

        .next-challenge h3 {
            color: #000000;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .next-challenge p {
            color: #666666;
            line-height: 1.6;
        }

        @media (max-width: 600px) {
            .container {
                padding: 20px 10px;
            }
            
            .quiz-card {
                padding: 25px;
            }
            
            .day-header {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Daily Debug Quiz</h1>
            <p class="subtitle">Debug C++ code, sharpen your skills</p>
        </header>

        <div class="quiz-card">
            <div class="day-header">
                <div class="day-number" id="dayNumber">Day ???</div>
                <div class="date-info" id="dateInfo">Loading...</div>
            </div>

            <div id="questionContent">
                <div class="question-title" id="questionTitle">Loading today's challenge...</div>
                <div class="question-desc" id="questionDesc"></div>
                
                <div class="files-section">
                    <div class="files-title">üìÅ Challenge Files:</div>
                    <div id="fileLinks"></div>
                </div>

                <div class="answer-section">
                    <div class="answer-label">Enter the checksum from the challenge test:</div>
                    <input type="text" class="answer-input" id="answerInput" placeholder="Enter your answer here...">
                    <button class="submit-btn" onclick="checkAnswer()">Submit Answer</button>
                    <div id="result"></div>
                </div>
            </div>
        </div>

        <div class="stats">
            <div class="stat-card">
                <div class="stat-number" id="totalSolved">0</div>
                <div class="stat-label">Solved</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="currentStreak">0</div>
                <div class="stat-label">Streak</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="accuracy">0%</div>
                <div class="stat-label">Accuracy</div>
            </div>
        </div>

        <div class="next-challenge" id="nextChallenge" style="display: none;">
            <h3>üéâ Challenge Complete!</h3>
            <p>Come back tomorrow for the next debugging challenge!</p>
            <p style="margin-top: 10px; color: #666666;">Next challenge available at midnight UTC</p>
        </div>
    </div>

    <script>
        const challenges = [
            {
                title: "Broken Insertion Sort",
                description: "Your teammate left some buggy insertion sort code. The algorithm has two critical bugs that cause incorrect sorting behavior. Fix the implementation and run the test suite to get the challenge checksum.",
                files: [
                    { name: "insertion_sort.h", url: "challenges/day1/insertion_sort.h" },
                    { name: "insertion_sort.cpp", url: "challenges/day1/insertion_sort.cpp" },
                    { name: "test.cpp", url: "challenges/day1/test.cpp" }
                ],
                answer: "185250"
            },
            {
                title: "Vector Memory Bug",
                description: "A vector manipulation function is causing memory issues and producing wrong results. Debug the code and find the checksum from the large test case.",
                files: [
                    { name: "vector_ops.h", url: "challenges/day2/vector_ops.h" },
                    { name: "vector_ops.cpp", url: "challenges/day2/vector_ops.cpp" },
                    { name: "test.cpp", url: "challenges/day2/test.cpp" }
                ],
                answer: "294751"
            },
            {
                title: "Pointer Arithmetic Gone Wrong",
                description: "Classic C++ pointer mistakes are lurking in this array processing code. Track down the bugs and calculate the final checksum.",
                files: [
                    { name: "array_utils.h", url: "challenges/day3/array_utils.h" },
                    { name: "array_utils.cpp", url: "challenges/day3/array_utils.cpp" },
                    { name: "test.cpp", url: "challenges/day3/test.cpp" }
                ],
                answer: "156824"
            }
        ];

        function getDaysSinceEpoch() {
            const startDate = new Date('2025-01-01');
            const today = new Date();
            const diffTime = today - startDate;
            return Math.floor(diffTime / (1000 * 60 * 60 * 24));
        }

        function loadTodaysChallenge() {
            const dayIndex = getDaysSinceEpoch() % challenges.length;
            const challenge = challenges[dayIndex];
            const dayNumber = getDaysSinceEpoch() + 1;

            document.getElementById('dayNumber').textContent = `Day ${dayNumber}`;
            document.getElementById('dateInfo').textContent = new Date().toLocaleDateString('en-US', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });

            document.getElementById('questionTitle').textContent = challenge.title;
            document.getElementById('questionDesc').textContent = challenge.description;

            const fileLinksHtml = challenge.files.map(file => 
                `<a href="${file.url}" class="file-link" target="_blank">${file.name}</a>`
            ).join('');
            document.getElementById('fileLinks').innerHTML = fileLinksHtml;

            window.todaysAnswer = challenge.answer;
        }

        function checkAnswer() {
            const userAnswer = document.getElementById('answerInput').value.trim();
            const resultDiv = document.getElementById('result');
            
            if (!userAnswer) {
                resultDiv.innerHTML = '<div class="result incorrect">Please enter an answer</div>';
                return;
            }

            if (userAnswer === window.todaysAnswer) {
                resultDiv.innerHTML = '<div class="result correct">üéâ Correct! Great debugging skills!</div>';
                updateStats(true);
                document.getElementById('nextChallenge').style.display = 'block';
            } else {
                resultDiv.innerHTML = '<div class="result incorrect">‚ùå Incorrect. Double-check your fix and try again.</div>';
                updateStats(false);
            }
        }

        function updateStats(correct) {
            let stats = JSON.parse(localStorage.getItem('debugQuizStats') || '{"solved": 0, "attempts": 0, "streak": 0, "lastSolvedDay": -1}');
            
            const currentDay = getDaysSinceEpoch();
            stats.attempts++;
            
            if (correct) {
                if (stats.lastSolvedDay !== currentDay) {
                    stats.solved++;
                    if (stats.lastSolvedDay === currentDay - 1) {
                        stats.streak++;
                    } else {
                        stats.streak = 1;
                    }
                    stats.lastSolvedDay = currentDay;
                }
            } else {
                if (stats.lastSolvedDay !== currentDay - 1) {
                    stats.streak = 0;
                }
            }

            localStorage.setItem('debugQuizStats', JSON.stringify(stats));
            displayStats();
        }

        function displayStats() {
            const stats = JSON.parse(localStorage.getItem('debugQuizStats') || '{"solved": 0, "attempts": 0, "streak": 0}');
            
            document.getElementById('totalSolved').textContent = stats.solved;
            document.getElementById('currentStreak').textContent = stats.streak;
            
            const accuracy = stats.attempts > 0 ? Math.round((stats.solved / stats.attempts) * 100) : 0;
            document.getElementById('accuracy').textContent = accuracy + '%';
        }

        document.getElementById('answerInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkAnswer();
            }
        });

        loadTodaysChallenge();
        displayStats();
    </script>
</body>
</html>