<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C++ Mastery Quiz - g0ridev</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'JetBrains Mono', 'Fira Code', 'Courier New', monospace;
            background: #0d1117;
            color: #c9d1d9;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px 20px;
            background: linear-gradient(135deg, #58a6ff, #7c3aed);
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(88, 166, 255, 0.3);
        }

        h1 {
            font-size: 2.5em;
            font-weight: 800;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .subtitle {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .quiz-card {
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.2);
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #30363d;
        }

        .question-number {
            background: #58a6ff;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .difficulty {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .difficulty.easy { background: #238636; }
        .difficulty.medium { background: #fd971f; }
        .difficulty.hard { background: #f92672; }

        .code-block {
            background: #0d1117;
            border: 1px solid #21262d;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            overflow-x: auto;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9em;
            white-space: pre;
            line-height: 1.4;
        }

        .code-block code {
            color: #c9d1d9;
        }

        /* Basic C++ syntax highlighting */
        .keyword { color: #ff7b72; }
        .string { color: #a5d6ff; }
        .comment { color: #8b949e; }
        .number { color: #79c0ff; }
        .preprocessor { color: #ffa657; }

        .question-text {
            color: #f0f6fc;
            font-size: 1.1em;
            margin-bottom: 20px;
        }

        .options-container {
            margin: 20px 0;
        }

        .option {
            background: #21262d;
            border: 2px solid #30363d;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: #58a6ff;
            background: #0d1117;
        }

        .option.selected {
            border-color: #58a6ff;
            background: rgba(88, 166, 255, 0.1);
        }

        .option.correct {
            border-color: #238636;
            background: rgba(35, 134, 54, 0.2);
        }

        .option.incorrect {
            border-color: #f92672;
            background: rgba(249, 38, 114, 0.2);
        }

        .option-letter {
            background: #30363d;
            color: #c9d1d9;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .option.selected .option-letter {
            background: #58a6ff;
            color: white;
        }

        .option.correct .option-letter {
            background: #238636;
            color: white;
        }

        .option.incorrect .option-letter {
            background: #f92672;
            color: white;
        }

        .submit-btn {
            background: #238636;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 15px;
        }

        .submit-btn:hover {
            background: #2ea043;
            transform: translateY(-1px);
        }

        .submit-btn:disabled {
            background: #30363d;
            cursor: not-allowed;
            transform: none;
        }

        .next-btn {
            background: #58a6ff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
            display: none;
        }

        .next-btn:hover {
            background: #1f6feb;
        }

        .explanation {
            background: #0d1117;
            border-left: 4px solid #fd971f;
            padding: 20px;
            margin-top: 20px;
            border-radius: 0 8px 8px 0;
            display: none;
        }

        .explanation h4 {
            color: #fd971f;
            margin-bottom: 10px;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 30px;
        }

        .stat-card {
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }

        .stat-number {
            font-size: 1.5em;
            font-weight: bold;
            color: #58a6ff;
        }

        .stat-label {
            font-size: 0.8em;
            color: #7d8590;
            margin-top: 5px;
        }

        .loading {
            text-align: center;
            color: #7d8590;
            font-size: 1.1em;
            padding: 40px;
        }

        .error {
            background: #f92672;
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        @media (max-width: 600px) {
            .container {
                padding: 10px;
            }
            
            .question-header {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
            
            .submit-btn, .next-btn {
                width: 100%;
                margin: 5px 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>C++ Mastery Quiz</h1>
            <p class="subtitle">Test your C++ fundamentals and advanced features</p>
        </header>

        <div class="quiz-card">
            <div id="loadingMessage" class="loading">Loading questions...</div>
            
            <div id="quizContent" style="display: none;">
                <div class="question-header">
                    <div class="question-number" id="questionNumber">Question 1</div>
                    <div class="difficulty easy" id="difficulty">Easy</div>
                </div>

                <div id="questionContent">
                    <!-- Question content will be loaded here -->
                </div>

                <div class="options-container" id="optionsContainer">
                    <!-- Options will be loaded here -->
                </div>

                <div>
                    <button class="submit-btn" id="submitBtn" onclick="submitAnswer()">Submit Answer</button>
                    <button class="next-btn" id="nextBtn" onclick="nextQuestion()">Next Question</button>
                </div>

                <div class="explanation" id="explanation">
                    <!-- Explanation will be shown here -->
                </div>
            </div>
        </div>

        <div class="stats">
            <div class="stat-card">
                <div class="stat-number" id="currentQ">1</div>
                <div class="stat-label">Current</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="correctCount">0</div>
                <div class="stat-label">Correct</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="accuracy">0%</div>
                <div class="stat-label">Accuracy</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalQuestions">0</div>
                <div class="stat-label">Total</div>
            </div>
        </div>
    </div>

    <script>
        let questions = [];
        let currentQuestionIndex = 0;
        let correctAnswers = 0;
        let selectedOption = -1;
        let answered = false;

        // Load questions from JSON file
        async function loadQuestions() {
            try {
                const response = await fetch('questions.json');
                if (!response.ok) {
                    throw new Error('Failed to load questions');
                }
                questions = await response.json();
                
                if (questions.length === 0) {
                    throw new Error('No questions found');
                }
                
                document.getElementById('loadingMessage').style.display = 'none';
                document.getElementById('quizContent').style.display = 'block';
                loadQuestion();
            } catch (error) {
                document.getElementById('loadingMessage').innerHTML = `
                    <div class="error">
                        Error loading questions: ${error.message}<br>
                        Make sure 'questions.json' exists in the same directory.
                    </div>
                `;
            }
        }

        function formatCppCode(code) {
            return code
                .split('\n')
                .map(line => line.trim())
                .filter(line => line.length > 0)
                .join('\n')
                .replace(/#include\s*<[^>]+>/g, '<span class="preprocessor">$&</span>')
                .replace(/\b(int|char|float|double|bool|void|string|const|static|return|if|else|for|while|class|public|private|protected|namespace|using|template|typename|auto|decltype)\b/g, '<span class="keyword">$&</span>')
                .replace(/"[^"]*"/g, '<span class="string">$&</span>')
                .replace(/\/\/.*$/gm, '<span class="comment">$&</span>')
                .replace(/\b\d+\b/g, '<span class="number">$&</span>')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;')
                .replace(/&lt;span class="([^"]*)"&gt;([^&]*)&lt;\/span&gt;/g, '<span class="$1">$2</span>')
                .replace(/&lt;([^&]*?)&gt;/g, '<$1>');
        }

        function loadQuestion() {
            const q = questions[currentQuestionIndex];
            
            document.getElementById('questionNumber').textContent = `Question ${currentQuestionIndex + 1}`;
            document.getElementById('difficulty').textContent = q.difficulty;
            document.getElementById('difficulty').className = `difficulty ${q.difficulty}`;
            
            let questionHtml = `<div class="question-text">${q.question}</div>`;
            if (q.code) {
                const formattedCode = formatCppCode(q.code);
                questionHtml += `<div class="code-block"><code>${formattedCode}</code></div>`;
            }
            
            document.getElementById('questionContent').innerHTML = questionHtml;
            
            const optionsHtml = q.options.map((option, index) => `
                <div class="option" onclick="selectOption(${index})">
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div>${option}</div>
                </div>
            `).join('');
            
            document.getElementById('optionsContainer').innerHTML = optionsHtml;
            
            // Reset state
            selectedOption = -1;
            answered = false;
            document.getElementById('submitBtn').disabled = true;
            document.getElementById('submitBtn').style.display = 'inline-block';
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('explanation').style.display = 'none';
            
            updateStats();
        }

        function selectOption(index) {
            if (answered) return;
            
            selectedOption = index;
            
            document.querySelectorAll('.option').forEach((opt, i) => {
                opt.classList.toggle('selected', i === index);
            });
            
            document.getElementById('submitBtn').disabled = false;
        }

        function submitAnswer() {
            if (selectedOption === -1 || answered) return;
            
            answered = true;
            const q = questions[currentQuestionIndex];
            const isCorrect = selectedOption === q.correct;
            
            if (isCorrect) correctAnswers++;
            
            document.querySelectorAll('.option').forEach((opt, i) => {
                if (i === q.correct) {
                    opt.classList.add('correct');
                } else if (i === selectedOption) {
                    opt.classList.add('incorrect');
                }
                opt.style.cursor = 'default';
            });
            
            document.getElementById('explanation').innerHTML = `
                <h4>${isCorrect ? '✅ Correct!' : '❌ Incorrect'}</h4>
                <p>${q.explanation}</p>
            `;
            document.getElementById('explanation').style.display = 'block';
            
            document.getElementById('submitBtn').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'inline-block';
            
            updateStats();
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex >= questions.length) {
                showFinalResults();
                return;
            }
            loadQuestion();
        }

        function showFinalResults() {
            const accuracy = Math.round((correctAnswers / questions.length) * 100);
            document.getElementById('questionContent').innerHTML = `
                <div class="question-text" style="text-align: center; font-size: 1.3em;">
                    🎉 Quiz Complete!<br><br>
                    Final Score: ${correctAnswers}/${questions.length} (${accuracy}%)
                </div>
            `;
            document.getElementById('optionsContainer').innerHTML = `
                <button class="submit-btn" onclick="restartQuiz()" style="width: 100%; margin-top: 20px;">
                    Take Quiz Again
                </button>
            `;
            document.getElementById('explanation').style.display = 'none';
        }

        function restartQuiz() {
            currentQuestionIndex = 0;
            correctAnswers = 0;
            loadQuestion();
        }

        function updateStats() {
            document.getElementById('currentQ').textContent = currentQuestionIndex + 1;
            document.getElementById('correctCount').textContent = correctAnswers;
            document.getElementById('totalQuestions').textContent = questions.length;
            
            const accuracy = currentQuestionIndex > 0 ? Math.round((correctAnswers / (currentQuestionIndex + (answered ? 1 : 0))) * 100) : 0;
            document.getElementById('accuracy').textContent = accuracy + '%';
        }

        // Initialize when page loads
        loadQuestions();
    </script>
</body>
</html>